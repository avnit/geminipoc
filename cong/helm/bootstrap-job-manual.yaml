---
# Source: cong-chart/templates/bootstrap-job.yaml
apiVersion: batch/v1
kind: Job
metadata:
  namespace: default
  name: release-name-cong-chart-bootstrap
  annotations:
    "helm.sh/hook": pre-install,pre-upgrade
    "helm.sh/hook-weight": "5"
    "helm.sh/hook-delete-policy": hook-succeeded
  labels:
    helm.sh/chart: cong-chart-0.2.1
    app.kubernetes.io/name: cong-chart
    app.kubernetes.io/instance: release-name
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bootstrap
spec:
  template:
    spec:
      serviceAccountName: release-name-cong-chart
      containers:
        - name: bootstrap
          image: "us-docker.pkg.dev/sparkcognition-neon-dev/engineering/neon/bootstrap:latest"
          imagePullPolicy: IfNotPresent
          command:
            - "/bin/sh"
            - "-c"
            - "echo 'Bootstrap job is running'; sleep 30"
          env:
            - name: CONSUL_HOST
              value: "release-name-cong-chart-consul"
          volumeMounts:
            - name: log4j-config
              mountPath: /opt/log4j2.xml
              subPath: log4j2.xml
      volumes:
        - name: log4j-config
          configMap:
            name: release-name-cong-chart-log4j-config
      restartPolicy: OnFailure
  backoffLimit: 10
